# GC压测总结

对比几类GC的日志（SerialGC-》ParallelGC-》ConcMarkSweepGC-》G1GC）。总结如下：

### 1. GC日志、GC过程的复杂度。

从串行到并行到并发到G1，GC日志越来越复杂，尤其是G1GC的日志。

### 2. GC暂停的时间

G1最短，并行最长，同样的参数下CMSGC没有出现full gc。

### 3. 业务吞吐量

##### 3.1 默认开启jvm自适应参数

CMS最大，其他依次是串行GC、并行GC、G1GC，其中G1GC的业务吞吐量下降非常明显。【默认开启jvm自适应参数】

##### 3.2 关闭jvm自适应参数

```
XX:-UseAdaptiveSizePolicy
```

1）G1的业务吞吐量表现没有什么变化。

2）并行GC使用的总内存使用率从接近Xmx的数值下降到只有50%左右、吞吐量下降了一半以上非常明显。

##### 3.3  自适应参数设置的变化分析

1）自适应参数对于内存的灵活调整对G1没什么影响。对G1影响最大的似乎是Xmx最大内存设置的大小，Xmx设置很小时（256M以下）G1业务吞吐量明显较弱、内存到1G以上时G1与CMS的业务吞吐量已经不相上下。

2）并行GC前后差异原因可能与内存的使用率导致的gc频率变化导致的gc占用cpu资源变化有关，关闭自适应参数时，并行GC的full GC暂停总的时间、次数都增加了10倍。所以***使用并行GC时千万不可以关闭自适应参数***。

3）对比的结果受限于测试的代码逻辑，不同的业务场景下新生代老年代的分布情况不一样、内存配置不一样、业务类型计算型还是IO型都会对结果造成很大的影响，实际的调优需要在实际业务场景中分析。